<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>MapShot</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css">
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"
        integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous" />

    <script type="text/javascript" src="../static/js/navbar.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
    <script type="text/javascript">
        (function () {
            emailjs.init("user_betWihA6XgXwOyOKEHdeq");
        })();

        window.onload = function () {

            document.getElementById('contact-form').addEventListener('submit', function (event) {
                event.preventDefault();
                if(this.from_name.value == "" && !this.no_reply.checked){
                    alert("답장을 받을 메일을 입력해 주세요.");
                    return;
                }

                else if(this.message.value == ""){
                    alert("내용을 입력해 주세요");
                    return;
                }           

                document.getElementById("submitButton").setAttribute("class", "button is-link is-loading");
                this.contact_number.value = Math.random() * 100000 | 0;

                emailjs.sendForm('mapshot_contact', 'template_2wpci79', this)
                        .then(function(response) {
                            alert("전송 완료 되었습니다.");
                            document.getElementById("submitButton").setAttribute("class", "button is-link");
                            
                        }, function(error) {
                            alert("잠시 후 다시 전송해주세요");
                            document.getElementById("submitButton").setAttribute("class", "button is-link");
                            
                        });

                
            });
        }

    </script>
</head>


<body>
    <nav class="navbar is-light">
        <div class="container is-fluid">
            <div class="navbar-brand">
                <a class="navbar-item" href="../index.html">
                    <p class="title is-4">MAPSHOT</p>
                </a>

                <a role="button" class="navbar-burger" onclick="navbarBurgerClick(this)">
                    <span aria-hidden="true"></span>
                    <span aria-hidden="true"></span>
                    <span aria-hidden="true"></span>
                </a>
            </div>

            <div class="navbar-menu" id="navbar-menu">
                <div class="navbar-start">
                    <a class="navbar-item" href="../manual/1/index.html">
                        사용법
                    </a>

                    <a class="navbar-item" href="../log/index.html">
                        패치내역
                    </a>

                    <a class="navbar-item" href="../contact/index.html">
                        문의
                    </a>
                </div>

                <div class="navbar-end">
                    <a class="navbar-item" href="../opensource/index.html">
                        오픈소스
                    </a>
                </div>

            </div>
        </div>

    </nav>
    <div class="container is-fluid">
        <form class="container is-fluid mt-6" id="contact-form">
            <input type="hidden" name="contact_number">
            <div class="field">
                <label class="label">카테고리</label>
                <div class="control">
                    <div class="select">
                        <select name="to_name">
                            <option>오류 / 버그</option>
                            <option>기능 추가</option>
                            <option>사용법</option>
                            <option>기타</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="field">
                <label class="label">답신 메일</label>
                <div class="control has-icons-left has-icons-right">
                    <input class="input" type="email" placeholder="답장 받으실 메일을 적어주세요" name="from_name">
                    <span class="icon is-small is-left">
                        <i class="fas fa-envelope"></i>
                    </span>
                </div>
            </div>

            <div class="field">
                <div class="control">
                  <label class="checkbox">
                    <input type="checkbox" name="no_reply">
                   답장을 받지 않겠습니다.
                  </label>
                </div>
            </div>

            <div class="field">
                <label class="label">내용</label>
                <div class="control">
                    <textarea class="textarea" placeholder="내용을 적어주세요" name="message"></textarea>
                </div>
            </div>

            <div class="field is-grouped">
                <div class="control">
                    <button id="submitButton" type="submit" class="button is-link">전송하기</button>
                    <p class="help is-danger">Internet Explorer 에서는 작동하지 않습니다.</p>
                    <p class="help is-danger">다른 브라우저를 이용하여 주시거나,</p>
                    <p class="help is-danger"><strong>chanwoo3176@naver.com</strong> 으로 메일을 보내주세요.</p>
                </div>
            </div>

        </form>
    </div>
</body>

</html>